(function(){var a=this,b=function(a){return a instanceof b?a:!this instanceof b?new b(a):void(this._wrapped=a)};a.BOUNDLESS=b,b.VERSION="0.1",b.initialize=function(){b.router=new b.Router,Backbone.history.start()},jQuery(document).ready(b.initialize),b.Map=Backbone.View.extend({el:"#map",template:'<div id="map"></div>',settings:{map:{zoom:17,center:new google.maps.LatLng(47.653851681095,-122.30780562698),minZoom:1,maxZoom:19,disableDoubleClickZoom:!1,mapTypeControl:!1},marker:{animation:google.maps.Animation.DROP}},initialize:function(){_.bindAll(this,"putMarkersOnMap","render","show","hide"),this.template=_.template(this.template),jQuery("body").html(this.template),this.points=new b.Map.Points,this.points.on("sync",this.render)},render:function(){this.map=new google.maps.Map(document.getElementById("map"),this.settings.map),this.bounds=new google.maps.LatLngBounds,this.points.each(this.putMarkersOnMap)},putMarkersOnMap:function(a){var b=new google.maps.Marker(this.settings.marker),c=new google.maps.LatLng(a.get("coordinate").latitude,a.get("coordinate").longitude);this.bounds.extend(c),b.setPosition(c),b.setTitle(a.get("title")),b.setText(a.get("text")),b.setMap(this.map),this.map.fitBounds(this.bounds)},show:function(){},hide:function(){}}),b.Map.Point=Backbone.Model.extend({}),b.Map.Points=Backbone.Collection.extend({url:"?json=map_point.get_map_points",model:b.Map.Point,initialize:function(){this.on("error",this.error),this.fetch()},error:function(){console.log("There was an error retrieving the map points.")}}),b.Router=Backbone.Router.extend({routes:{"!/map":"initializeMap"},initialize:function(){_.bindAll(this,"initializeMap")},initializeMap:function(){b.map=new b.Map}})}).call(this);